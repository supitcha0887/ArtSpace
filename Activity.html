<!doctype html>
<html lang="th">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ART SPACE — Activity</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> -->

    <link rel="stylesheet" href="ActCSS.css">
    <link rel="stylesheet" href="navbar.css">




</head>

<body>
    <!-- NAVBAR -->
    <!--<div id="navbar-placeholder"></div>
        <script>
        fetch("navbar.html")
            .then(res => res.text())
            .then(html => {
            document.getElementById("navbar-placeholder").innerHTML = html;
            });
        </script>-->

    <header class="nav">
        <a class="brand" href="home.html">
            <img src="/img/logo.png" alt="" class="brand-logo">
        </a>
        <div class="nav-right">
            <nav class="nav-links" id="navLinks">
                <a href="#" class="is-active">Activities</a>
                <a href="community.html">Community</a>
                <a href="home.html#about">About</a>
            </nav>
            <div class="nav-actions">
                <a class="account-pill" href="myprofile.html">
                    <img class="account-pill__avatar" src="/img/img1.png" alt="">
                    <span>User account</span>
                </a>
                <a class="Notification" href="notify.html">
                    <img class="bell" src="/img/notic.png">
                </a>
            </div>

            <button class="hamburger" id="hamburger" aria-label="เมนู">
                <span></span><span></span><span></span>
            </button>
        </div>
    </header>

    <!-- HERO (plain) -->
    <section class="hero plain">
        <div class="hero-inner">
            <h1 class="hero-title">“หาเพื่อนใหม่ที่รักศิลปะเหมือนคุณ แล้วสร้างความทรงจำไปด้วยกัน”</h1>
            <div class="hero-cta row">
                <a class="cta btn-yellow icon-left" id="goFind">
                    <img src="/img/act.png" class="btn-ico" alt="">
                    <button class="btn-find-crate">
                        <img src="/img/search.png" class="icon-search">
                        Find Activity
                    </button>
                </a>
                <div class="or">OR</div>
                <div class="cta btn-yellow ghost icon-left">
                    <img src="/img/act1.png" class="btn-ico" alt="">
                    <button class="btn-find-crate" id="openCreateBtn">
                        <img src="/img/add.png" class="icon-create">
                        Create Activity
                    </button>
                    <!-- ส่วนpopup CreateActivity -->
                    <script>
                        document.addEventListener("DOMContentLoaded", () => {
                            document.getElementById("openCreateBtn").addEventListener("click", () => {
                                openPopup("CreateActivity.html", {
                                    className: "popup-create"
                                });
                            });
                        });
                    </script>
                    <!-- ส่วนpopup CreateActivity -->
                </div>
            </div>
        </div>

        <!-- SEARCH BAR -->
        <div class="search-wrap" id="searchWrap">
            <form class="search-bar" id="searchForm" method="GET" action="">
                <div class="lens"><img src="/img/search1.png" alt=""></div>

                <label for="q" class="sr-only"></label>
                <input id="q" name="q" class="q" placeholder="ค้นหากิจกรรม" />

                <div class="chips" id="chips"></div>

                <div class="bar-right">
                    <!-- Category: single choice + replace label -->
                    <div class="dropdown">
                        <select name="category" id="category" class="btn">
                            <option value="" class="opt input">หมวดหมู่ทั้งหมด</option>
                            <option value="Visual Arts" class="sw va btn">Visual Arts</option>
                            <option value="Photography" class="sw ph btn">Photography</option>
                            <option value="Writing" class="sw va btn">Writing</option>
                            <option value="Music" class="sw mu btn">Music</option>
                        </select>
                    </div>


                    <!-- Sort: 2 ตัวเลือก + replace label -->
                    <div class="dropdown">
                        <button type="button" id="btnSort" class="btn btn-surface">
                            <img src="/img/dropdow.png" class="caret" alt="">
                            <span id="sortLabel">เรียงลำดับ</span>
                        </button>
                        <div class="menu shadow-soft" id="menuSort" role="menu">
                            <div class="sort-grid two">
                                <button type="button" data-sort="rating_desc" class="sort-btn">เรตติ้งผู้จัด</button>
                                <button type="button" data-sort="date_asc" class="sort-btn">วันที่</button>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-primary" type="submit">Search</button>
                </div>
            </form>
        </div>
    </section>

    <!-- RESULTS -->
    <main class="wrap">
        <section id="results" class="results"></section>
        <div id="empty" class="empty" style="display:none">
            <img class="empty-ill" src="/img/notfound.png" alt="">
            <p>ขออภัยไม่มีกิจกรรมที่คุณค้นหาในตอนนี้</p>
        </div>
    </main>


    <script type="module" src="data.js"></script>
    <script type="module" src="Activity.js"></script>
    <script defer src="MoredetailActivity-popup.js"></script>
    <script defer src="CreateActivity-popup.js"></script>

    <script>
        // เพิ่ม event listener สำหรับการปิด popup
        document.addEventListener('DOMContentLoaded', function () {
            console.log('Page loaded, popup functions available:', typeof openActivityPopup);

            // ตรวจสอบว่า popup elements มีอยู่จริง
            const overlay = document.getElementById('popupOverlay');
            if (overlay) {
                console.log('Popup overlay found');

                // ปิด popup เมื่อคลิกนอกพื้นที่
                overlay.addEventListener('click', function (e) {
                    if (e.target === this) {
                        closeActivityPopup();
                    }
                });
            } else {
                console.error('Popup overlay not found');
            }
        });
    </script>
</body>

</html>